# Сложности

Помимо сохранения конфиденциальности пользовательских данных, не менее важными другими основными целями нашего протокола являются: полное отсутствие централизации, общий механизм реализации смарт-контрактов, которые в наибольшей степени будут совместимы с EVM.

В этом разделе мы перечислим основные сложности, с которыми мы столкнулись при разработке протокола Obscuro.

- Зависимость аппаратных средств на основе TEE в приложениях, где значительная ценность зависит от безопасности оборудования, создает ряд проблем. Система, предназначенная для управления активами, не должна позволять злоумышленнику, способному скомпрометировать защищенное оборудование, завладеть ликвидностью ни при каких обстоятельствах. Другими словами, целостность распределённого реестра не должна зависеть от того, что TEE на 100% защищена от взлома или производитель оборудования на 100% заслуживает доверия. Obscuro использует безопасность Ethereum'а в сочетании с теорией игр для обнаружения и исправления возможных попыток взломов TEE.


- Система, в которой все постоянно шифруется, непригодна для использования. У пользователей должен быть способ запросить свои данные или предоставить их третьим лицам. Кроме того, существующий прикладной контракт, который раскрывает внутреннее состояние (например, функция balanceOf(address) стандарта ERC-20, используемая для поиска любого, кто хранит средства), должен быть тщательно продуман; поскольку, хоть Obscuro и может предотвратить видимость состояния контракта, функции могут этого не сделать.


- Другой критической проблемой для данного протокола является препятствование MEV. Поскольку пользовательские транзакции и их выполнение не видны нодам Obscuro, можно наивно предположить, что эта проблема решена. К сожалению, это не совсем так, поскольку агрегаторы могут получить ценную информацию через побочные каналы и использовать ее для извлечения выгоды. Например, агрегатор может владеть некоторыми счетами и отправлять на них транзакции в критические моменты, а затем запрашивать результаты. Obscuro решает эту проблему, вводя задержки в ключевые моменты, чтобы помешать агрегаторам выполнять атаки повторного воспроизведения, которые обычно используются для побочных каналов.


- Платформа, сохраняющая конфиденциальность, должна учитывать незаконное её использование и разрабатывать механизмы, помогающие разработчикам приложений избегать и пресекать их. Важным моментом в этом направлении является то, что ценность конфиденциальности со временем снижается, вплоть до того, что транзакции могут представлять лишь исторический интерес. Для многих транзакций, связанных с ценностной стоимостью, очень важно, чтобы они не были публичными при обработке и не могли быть опережены, но для других транзакций, они представляют ценность в течение более длительного периода времени. Obscuro использует это понимание и внедряет гибкую политику отложенного раскрытия транзакций. Знание того, что транзакции станут публичными в будущем, является сдерживающим фактором для пользователей от преступного поведения, поскольку правоохранительные органы в конечном итоге их настигнут. [Альтернативные](./appendix#alternative-revelation-options) варианты уже были рассмотрены.


- Одна из важнейших проблем такой системы заключается в том, чтобы гарантировать, что какое-либо катастрофическое событие не сможет оставить всю ликвидность заблокированной. Механизм, предотвращающий это, рассматривается в анализе [Модель рисков](./threat-model).


- Высокие комиссии за транзакции являются одним из основных барьеров для интеграции в Ethereum. Obscuro решает эту проблему, внедряя новый подход к расчету комиссий на основе фактических затрат для работы нод.
